(function($){$(document).on("click",".load",function(event){bounds=new google.maps.LatLngBounds();var request={option:"com_mapnavigator",categories:"["+$(this).data("category")+"]",format:"json"};$.ajax({type:"POST",data:request,format:"json",success:function(response){deleteMarkers();removeSidebarElements();var markers=eval("("+response+")");for(var key in markers){if(markers.hasOwnProperty(key)){if(markers[key].hasOwnProperty("image")){markers[key].info='<img src="'+markers[key].image+'"/>'+markers[key].info}var Latlng=new google.maps.LatLng(markers[key].lat,markers[key].lng);addMarker(Latlng,markers[key].title,markers[key].info,markers[key].type)}}}});return false})})(jQuery);function loadScript(){var a=document.createElement("script");a.type="text/javascript";a.src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize";document.body.appendChild(a)}window.onload=loadScript;var bounds,infoWnd,map;var markers=[];function initialize(){infoWnd=new google.maps.InfoWindow();var a={zoom:2,center:new google.maps.LatLng(0,0),mapTypeId:"roadmap"};map=new google.maps.Map(document.getElementById("map-canvas"),a);var b=[{featureType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#999"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#ffffff"}]}];map.setOptions({styles:b})}function addMarker(b,e,d,c){var a=new google.maps.Marker({position:b,map:map,title:e,icon:{path:google.maps.SymbolPath.CIRCLE,scale:2,fillColor:"#8a2b87",fillOpacity:1,strokeColor:"#8a2b87",strokeWeight:2}});bounds.extend(b);google.maps.event.addListener(a,"mouseover",function(){a.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"red",fillOpacity:1,strokeColor:"green",strokeWeight:2})});google.maps.event.addListener(a,"mouseout",function(){a.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:2,fillColor:"#8a2b87",fillOpacity:1,strokeColor:"#8a2b87",strokeWeight:2})});google.maps.event.addListener(a,"click",function(){infoWnd.setContent(d);infoWnd.open(map,a)});if(markers[e]!==e){createSidebarElement(a)}markers[e]=e;markers.push(a);map.fitBounds(bounds)}function createSidebarElement(b){var c=document.getElementById("sidebar");var a=document.createElement("li");var d=b.getTitle();a.innerHTML=d;c.appendChild(a);google.maps.event.addDomListener(a,"click",function(){google.maps.event.trigger(b,"click")});google.maps.event.addDomListener(a,"mouseover",function(){google.maps.event.trigger(b,"mouseover")});google.maps.event.addDomListener(a,"mouseout",function(){google.maps.event.trigger(b,"mouseout")})}function removeSidebarElements(){var a=document.getElementById("sidebar");while(a.firstChild){a.removeChild(a.firstChild)}}function setAllMap(b){for(var a=0;a<markers.length;a++){markers[a].setMap(b)}}function clearMarkers(){setAllMap(null)}function showMarkers(){setAllMap(map)}function deleteMarkers(){setAllMap(null);markers=[]};