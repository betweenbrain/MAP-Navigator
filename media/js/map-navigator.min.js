(function($){$(document).on("click",".load",function(event){bounds=new google.maps.LatLngBounds();var request={option:"com_mapnavigator",categories:"["+$(this).data("category")+"]",format:"json"};$.ajax({type:"POST",data:request,format:"json",success:function(response){deleteMarkers();removeSidebarElements();var markers=eval("("+response+")");for(var key in markers){if(markers.hasOwnProperty(key)){var Latlng=new google.maps.LatLng(markers[key].lat,markers[key].lng);addMarker(Latlng,markers[key].title,markers[key].info,key)}}}});return false})})(jQuery);function loadScript(){var a=document.createElement("script");a.type="text/javascript";a.src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize";document.body.appendChild(a)}window.onload=loadScript;var bounds,infoWnd,map;var infowindows=[];var markers=[];var active_info=null;function initialize(){infoWnd=new google.maps.InfoWindow();var a={zoom:2,center:new google.maps.LatLng(0,0),mapTypeId:"roadmap"};map=new google.maps.Map(document.getElementById("map-canvas"),a);var b=[{featureType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#999"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#ffffff"}]}];map.setOptions({styles:b})}function addMarker(c,g,f,d){var b=new google.maps.Marker({position:c,map:map,title:g,icon:{path:google.maps.SymbolPath.CIRCLE,scale:2,fillColor:"#8a2b87",fillOpacity:1,strokeColor:"#8a2b87",strokeWeight:2}});bounds.extend(c);google.maps.event.addListener(b,"mouseover",function(){b.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"red",fillOpacity:1,strokeColor:"green",strokeWeight:2})});google.maps.event.addListener(b,"mouseout",function(){b.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:2,fillColor:"#8a2b87",fillOpacity:1,strokeColor:"#8a2b87",strokeWeight:2})});createSidebarElement(b);markers.push(b);map.fitBounds(bounds);var a={content:"<div>"+f+"</div>",disableAutoPan:false,maxWidth:0,alignBottom:true,pixelOffset:new google.maps.Size(-16,-11),zIndex:null,boxClass:"info-windows",closeBoxURL:"",pane:"floatPane",enableEventPropagation:false,infoBoxClearance:"10px",position:b.position};var e=new InfoBox(a);google.maps.event.addListener(markers[markers.length-1],"click",function(){if(active_info){infowindows[active_info].close()}active_info=this.id;infowindows[this.id].open(this.map);return false})}function createSidebarElement(b){var c=document.getElementById("sidebar");var a=document.createElement("li");var d=b.getTitle();a.innerHTML=d;c.appendChild(a);google.maps.event.addDomListener(a,"click",function(){google.maps.event.trigger(b,"click")});google.maps.event.addDomListener(a,"mouseover",function(){google.maps.event.trigger(b,"mouseover")});google.maps.event.addDomListener(a,"mouseout",function(){google.maps.event.trigger(b,"mouseout")})}function removeSidebarElements(){var a=document.getElementById("sidebar");while(a.firstChild){a.removeChild(a.firstChild)}}function setAllMap(b){for(var a=0;a<markers.length;a++){markers[a].setMap(b)}}function clearMarkers(){setAllMap(null)}function showMarkers(){setAllMap(map)}function deleteMarkers(){setAllMap(null);markers=[]}google.maps.event.addDomListener(window,"load",initialize);